# BIモバイルツール計画（骨子）

## 1. 目的と利用シナリオ
- 目的: スマホブラウザで営業/CS/マネージャーが即座に収益・トラフィック・品質指標を確認し、アクションまで完結できること。
- 主な利用者: 営業、CS、マネージャー、SRE/オペレーション。
- シナリオ例: 朝会前の指標確認、障害兆候の早期検知と通知、キャンペーン効果のモバイルチェック、共有リンクでの速報共有。

## 2. 提供価値とKPI
- 主要価値: 「見たいときにすぐ見える」「異常にすぐ気づける」「共有が速い」。
- 成功KPI例: 月間モバイル利用率、主要指標の閲覧完了率、通知→確認までの中央値、共有リンク経由閲覧数。

## 3. 機能スコープ（初期リリース範囲）
- ダッシュボード表示: KPIカード、簡易トレンド（バー/エリア）、セグメント比較。
- 期間・フィルタ: 日/7日/30日、主要セグメント（チャネル/デバイス/リージョン）。
- 通知・アラート: 閾値/変化率でのプッシュ or メール（まずはモック/Slack送信を優先）。
- 共有/エクスポート: パブリックリンク（有効期限付き）とCSVエクスポート。
- アクション: 「再取得」「スナップショット送信」「スケジュール配信」などクイックアクション。

## 4. UX方針（モバイル最優先）
- 情報構造: 1画面で主要KPI→トレンド→セグメント→アクションの流れ。
- 操作性: 親指リーチ考慮のボタン配置、タップ領域の十分なパディング、ローディング/エラー/空状態の明示。
- レスポンシブ: 360px幅での最適化を基準に、タブレットでは2〜3カラム化。
- 表現: 高コントラストで屋外でも読める配色、軽量なモーション、SVG/シェイプ中心で軽量化。

## 5. データとアーキテクチャ（想定）
- データソース: 売上・利用・品質指標（API or S3/BigQuery集計テーブル）。初期はモック/ローカルJSONで接続面を先行。
- APIレイヤー: `/api/kpis`, `/api/segments`, `/api/traffic`, `/api/activities`（まずはモックエンドポイント）。
- クライアント状態: 軽量なフェッチ（SWR/React Query想定）＋シンプルなローカルステート。オフライン簡易キャッシュを検討。
- 更新頻度: 主要カードは30〜60秒ポーリングか手動リフレッシュ。通知はWebhook/Slack連携から開始。
- ログ/計測: 画面閲覧・フィルタ操作・共有リンク生成をイベント送信（後でプロダクト分析基盤と接続）。

## 6. 画面構成（v0ドラフト）
- ログイン: シンプルなサインイン（メール＋ワンタイムコード/パスコード想定）、軽量なブランド要素とCTA。
- ツール選択（ハブ）: 利用可能なBIツール/ビュー一覧（例: 売上ダッシュボード、運用ヘルス、セグメント深掘り、アドホック分析、設定）。最近使った/お気に入りを上部に。
- ホーム/ダッシュボード: ヒーロー、期間タブ、KPIカードグリッド、トレンドグラフ、セグメント比較、クイックアクション。
- 詳細ビュー（後続）: KPIタップで詳細チャート・期間/フィルタ変更・メモ/共有。
- 通知/設定（後続）: 閾値設定、共有リンク管理、テーマ/表示密度。

## 7. 技術スタック（現状/予定）
- フロント: Next.js App Router, TypeScript, Tailwind CSS（既存のスタイルに合わせる）。
- データ取得: Next.js API Routesでモック→実データに差し替え。SWR/React Queryを導入予定。
- ビジュアル: CSSグラデ/シェイプ中心の軽量グラフ、アイコンは必要最小限でSVGインライン。

## 8. マイルストーン（暫定）
- M0: モックAPI＋ダッシュボード描画完了（現状のUIをAPI駆動に）。
- M1: フィルタ/期間切り替えとローディング/エラー/空状態整備。
- M2: 共有リンク/CSV、簡易通知（Slack連携）。
- M3: 実データ接続とポーリング/キャッシュ最適化。
